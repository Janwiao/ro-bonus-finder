<!doctype html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>RO Bonus æŸ¥è©¢</title>
  <link rel="stylesheet" href="style.css?v=20251109a" />
  <script src="main.js?v=20251109a"></script>
  <script src="https://cdn.counter.dev/script.js" data-id="c27a7907-9737-4f1e-b3c8-22d4f349f0c4" data-utcoffset="8" async></script>
</head>
<body>
  <header class="topbar">
    <h1>RO Bonus æŸ¥è©¢</h1>
    <div class="controls">
      <input id="q" type="text" placeholder="è¼¸å…¥ bStr / åŠ›é‡ / aspdâ€¦" />

      <!-- ğŸ”½ æ”¹è‰¯å¾Œåˆ†é¡é¸å–® -->
      <div class="select-wrap">
        <select id="cat">
          <option value="">åˆ†é¡ï¼šå…¨éƒ¨</option>
          <option value="åŸºæœ¬å±¬æ€§">åˆ†é¡ï¼šåŸºæœ¬å±¬æ€§</option>
          <option value="ç‰¹æ€§å±¬æ€§">åˆ†é¡ï¼šç‰¹æ€§å±¬æ€§</option>
          <option value="HP/SP/AP">åˆ†é¡ï¼šHP/SP/AP</option>
          <option value="æ”»æ“Šèˆ‡é˜²ç¦¦">åˆ†é¡ï¼šæ”»æ“Šèˆ‡é˜²ç¦¦</option>
          <option value="é™„åŠ èƒ½åŠ›">åˆ†é¡ï¼šé™„åŠ èƒ½åŠ›</option>
          <option value="HP/SP">åˆ†é¡ï¼šHP/SP</option>
          <option value="æ¢å¾©æ²»ç™’">åˆ†é¡ï¼šæ¢å¾©æ²»ç™’</option>
          <option value="æ–½æ³•èˆ‡å»¶é²">åˆ†é¡ï¼šæ–½æ³•èˆ‡å»¶é²</option>
          <option value="å±¬æ€§èˆ‡ç¨®æ—ä¿®æ­£">åˆ†é¡ï¼šå±¬æ€§èˆ‡ç¨®æ—ä¿®æ­£</option>
          <option value="HP/SPæ”»æ“Šæ¢å¾©">åˆ†é¡ï¼šHP/SPæ”»æ“Šæ¢å¾©</option>
          <option value="HP/SPæ”»æ“Šæ¸›å°‘">åˆ†é¡ï¼šHP/SPæ”»æ“Šæ¸›å°‘</option>
          <option value="HP/SPæ”»æ“Šå¢ç›Š">åˆ†é¡ï¼šHP/SPæ”»æ“Šå¢ç›Š</option>
          <option value="å‚·å®³åå½ˆ">åˆ†é¡ï¼šå‚·å®³åå½ˆ</option>
          <option value="å¸é™¤è£å‚™">åˆ†é¡ï¼šå¸é™¤è£å‚™</option>
          <option value="é­”ç‰©æ‰è½">åˆ†é¡ï¼šé­”ç‰©æ‰è½</option>
          <option value="ç‹€æ…‹èˆ‡å…¶ä»–æ§åˆ¶">åˆ†é¡ï¼šç‹€æ…‹èˆ‡å…¶ä»–æ§åˆ¶</option>
        </select>
        <svg class="arrow" viewBox="0 0 24 24" width="16" height="16">
          <path fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
            d="M6 9l6 6 6-6" />
        </svg>
      </div>

      <!-- ğŸ”½ æ–°å¢ä¾†æºé¸å–® -->
      <div class="select-wrap">
        <select id="src">
          <option value="">ä¾†æºï¼šå…¨éƒ¨</option>
          <option value="rAthena">ä¾†æºï¼šrAthena</option>
          <option value="BetterRA">ä¾†æºï¼šBetterRA</option>
          <option value="Panda">ä¾†æºï¼šPanda</option>
        </select>
        <svg class="arrow" viewBox="0 0 24 24" width="16" height="16">
          <path fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
            d="M6 9l6 6 6-6" />
        </svg>
      </div>

      <label class="chk">
        <input id="full" type="checkbox" checked />
        å…¨åŸŸæœå°‹ï¼ˆåç¨±ï¼‹èªªæ˜ï¼‰
      </label>
    </div>
  </header>

  <main class="container">
    <div class="table-wrap">
      <table class="grid" id="tbl">
        <thead>
          <tr>
            <th style="width:72px">ID</th>
            <th>æŒ‡ä»¤ / åç¨±</th>
            <th>æ•ˆæœèªªæ˜</th>
            <th style="width:140px">åˆ†é¡</th>
            <th style="width:120px">ä¾†æº</th>
          </tr>
        </thead>
        <tbody id="tbody"></tbody>
      </table>
      <div id="empty" class="empty">æ²’æœ‰ç¬¦åˆçš„çµæœ</div>
    </div>
  </main>

  <footer class="footer">
    <span id="count">0</span> ç­†
    <span class="credit">Made by Nori</span>
  </footer>
  <div class="credit2 left">Made by Nori</div>
  <div class="credit2 right">Made by Nori</div>


  <script src="bonus.js?v=20251106c"></script>
  <script>
    const data = (typeof BONUSES !== "undefined" ? BONUSES : []).map((it, i) => ({
      id: it.id ?? (i + 1),
      name: it.name || "",
      desc: it.desc || "",
      category: it.category || "",
      source: it.source || ""
    }));

    const q = document.querySelector("#q");
    const catSel = document.querySelector("#cat");
    const srcSel = document.querySelector("#src");
    const full = document.querySelector("#full");
    const tbody = document.querySelector("#tbody");
    const empty = document.querySelector("#empty");
    const count = document.querySelector("#count");

    const norm = s => (s || "").toString().normalize('NFKC').trim();
    const highlight = (text, kw) => {
      if (!kw) return text;
      const re = new RegExp("(" + kw.replace(/[.*+?^${}()|[\]\\]/g, "\\$&") + ")", "ig");
      return text.replace(re, '<mark>$1</mark>');
    };

    function render(rows, kw) {
      tbody.innerHTML = "";
      rows.forEach(r => {
        const tr = document.createElement("tr");
        tr.innerHTML = `
          <td>${r.id}</td>
          <td class="mono">${highlight(r.name, kw)}</td>
          <td>${highlight(r.desc, kw)}</td>
          <td>${r.category || "-"}</td>
          <td>${r.source || "-"}</td>
        `;
        tbody.appendChild(tr);
      });
      empty.style.display = rows.length ? "none" : "block";
      count.textContent = rows.length;
    }

    function applyFilter() {
      const kw = norm(q.value);
      const cat = catSel.value;
      const src = srcSel.value;
      let rows = data;

      if (cat) rows = rows.filter(r => r.category === cat);
      if (src) rows = rows.filter(r => r.source === src);

      if (kw) {
        const kwLower = kw.toLowerCase();
        const kwNorm = kw.normalize('NFKC');
        rows = rows.filter(r => {
          const n = norm(r.name);
          const d = norm(r.desc);
          const hit = (
            n.includes(kwNorm) || d.includes(kwNorm) ||
            n.toLowerCase().includes(kwLower) || d.toLowerCase().includes(kwLower)
          );
          return full.checked ? hit : (n.includes(kwNorm) || n.toLowerCase().includes(kwLower));
        });
      }
      render(rows, kw);
    }

    let t = 0;
    q.addEventListener("input", () => { clearTimeout(t); t = setTimeout(applyFilter, 120); });
    catSel.addEventListener("change", applyFilter);
    srcSel.addEventListener("change", applyFilter);
    full.addEventListener("change", applyFilter);

    window.addEventListener("DOMContentLoaded", () => {
      document.body.classList.add("fade-in");
      full.checked = true;
      applyFilter();
    });
  </script>
</body>
</html>